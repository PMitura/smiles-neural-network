# Template for running rnn
name: 'rnn'

params:
  data:
    use_embedding: false

    # number of label columns to prepare
    input_count: 1
    extra_nominals: 0
    label_count: 52
    use_test_flags: true

    # fixed alphasize options
    alpha_fixed: false
    alpha_fixed_size: 42

    # epsilon for catching numbers close to zero
    eps: 0.0001

    labels: ~
    testing: ~
  rnn:
    # RNN parameters
    seed: 12346
    td_layer_multiplier: 0.5   # time-distributed layer modifier of neuron count
    gru_layer_multiplier: 1    # -||- for gru
    epochs: 200
    batch: 160                 # metacentrum.cz: 128 - 160, optimum by grid: 96
    learning_rate: 0.003
    early_stop: 50             # number of tolerated epochs without improvement

    embedding_outputs: 30      # number of inputs generated by embedding if used
    chained_models: true
    chained_labels: '[range(1, 4) * 8, range(4, 8) * 6, range(8, 14) * 4,
            range(14, 22) * 3, range(22, 46), [0] * 24]'
    chained_predict: '[0]'
    freeze_idxs: 'set([5])'
    trainable_inner: true

    # learning rate decay settings
    learning_rate_decay: true
    learning_rate_decay_type: 'step' # step,time,
    learning_rate_decay_step_config_steps: 20
    learning_rate_decay_step_config_ratio: 0.5

    # classification settings
    classify_threshold: 0
    classify_label_pos: 1
    classify_label_neg: -1
    classify_activation: 'tanh'

    # preprocessing switches
    label_idxs: range(46)      # indexes of columns to use as label
    zscore_norm: true          # undone after testing
    logarithm: false           # dtto, sets all values (x) to -log(x)

    # holdout settings
    flag_based_hold: false      # bases holdout on col called 'is_testing'
    holdout_ratio: 0.8         # used if flag based holdout is disabled

    # testing settings
    predict_print_samples: 15  # samples printed to stdout
    classify: false            # regression if false
    distrib_bins: 15           # bins form visualising output distribution
    use_partitions: true       # partition test set and compute averages
    num_partitions: 5

    # statistics settings
    comment: 'test - scaled lr on six chain'
    scatter_visualize: true
