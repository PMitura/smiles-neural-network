# Experiment dnn_rapidminer
name: 'dnn_rapidminer'

# Template for default values
template: 'rnn.yml'

# DB fetch params
fetch:
  table: 'output.target_molweight_features_wide'
  cols: ['canonical_smiles','standard_value_1977_avg', 'MinAbsPartialCharge','HeavyAtomMolWt','MaxAbsPartialCharge','MinAbsEStateIndex','Chi3n','HallKierAlpha','PEOE_VSA1','PEOE_VSA10','PEOE_VSA11','PEOE_VSA12','PEOE_VSA13','PEOE_VSA14','PEOE_VSA2','PEOE_VSA3','PEOE_VSA6','PEOE_VSA8','PEOE_VSA9','SMR_VSA1','SMR_VSA10','SMR_VSA3','SMR_VSA6','SMR_VSA9','SlogP_VSA10','SlogP_VSA3','SlogP_VSA4','SlogP_VSA6','TPSA','EState_VSA3','EState_VSA5','EState_VSA7','EState_VSA8','VSA_EState9','NHOHCount','NumAliphaticHeterocycles','NumAromaticHeterocycles','MolLogP']
  order: 'canonical_smiles'
  index_col: ~
  limit: 1000
  where:  'is_in_1977 = 1'

# Experiment params
params:
  data:
    # number of label columns to prepare
    input_count: 1
    extra_nominals: 0
    label_count: 37
    use_test_flags: false
    # for statistics sending
    labels: ['standard_value_1977_avg','MinAbsPartialCharge','HeavyAtomMolWt','MaxAbsPartialCharge','MinAbsEStateIndex','Chi3n','HallKierAlpha','PEOE_VSA1','PEOE_VSA10','PEOE_VSA11','PEOE_VSA12','PEOE_VSA13','PEOE_VSA14','PEOE_VSA2','PEOE_VSA3','PEOE_VSA6','PEOE_VSA8','PEOE_VSA9','SMR_VSA1','SMR_VSA10','SMR_VSA3','SMR_VSA6','SMR_VSA9','SlogP_VSA10','SlogP_VSA3','SlogP_VSA4','SlogP_VSA6','TPSA','EState_VSA3','EState_VSA5','EState_VSA7','EState_VSA8','VSA_EState9','NHOHCount','NumAliphaticHeterocycles','NumAromaticHeterocycles','MolLogP']
    testing: ''
  rnn:
    # RNN parameters
    learning_rate: 0.0005
    epochs: 500
    batch: 8

    num_partitions: 2

    td_layer_multiplier: 4
    gru_layer_multiplier: 4

    classify: false            # regression if false
    label_binning: false
    label_binning_after_train: false
    label_binning_ratio: 0.5
    early_stop: 20

    chained_models: false
    chained_labels: '[range(1, 25)]'
    # chained_labels: '[range(1, 4) * 8]'
    chained_test_labels: '[[0] * 24]'
    chained_predict: '[0]'
    freeze_idxs: 'set()'
    trainable_inner: true

    zscore_norm: true
    logarithm: true

    # learning rate decay settings
    learning_rate_decay: false

    flag_based_hold: false
    holdout_ratio: 0.2

    # preprocessing switches
    label_idxs: 'range(53)'      # indexes of columns to use as label

    # statistics settings
    comment: '[DNN] dnn vs rapidminer'
