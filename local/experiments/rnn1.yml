# Experiment rnn1
name: 'rnn1'

# Template for default values
template: 'rnn.yml'

# DB fetch params
fetch:
  table: 'target_206_1977_features_wide'
  cols: ['canonical_smiles',
  'standard_value_log','MinAbsPartialCharge','HeavyAtomMolWt','MaxAbsPartialCharge','MinAbsEStateIndex','Chi3n','HallKierAlpha','PEOE_VSA1','PEOE_VSA10','PEOE_VSA11','PEOE_VSA12','PEOE_VSA13','PEOE_VSA14','PEOE_VSA2','PEOE_VSA3','PEOE_VSA6','PEOE_VSA8','PEOE_VSA9','SMR_VSA1','SMR_VSA10','SMR_VSA3','SMR_VSA6','SMR_VSA9','SlogP_VSA10','SlogP_VSA3','SlogP_VSA4','SlogP_VSA6','TPSA','EState_VSA3','EState_VSA5','EState_VSA7','EState_VSA8','VSA_EState9','NHOHCount','NumAliphaticHeterocycles','NumAromaticHeterocycles','MolLogP','fr_Ar_COO','fr_C_O','fr_Imine','fr_NH1','fr_Ndealkylation2','fr_amide','fr_aryl_methyl','fr_ester','fr_ether','fr_furan','fr_imidazole','fr_methoxy','fr_piperzine','fr_pyridine','fr_sulfide','fr_thiazole','fr_urea',
  'is_testing']
  index_col: ~
  limit: ~
  where: 'is_testing IS NOT NULL'

# Experiment params
params:
  data:
    # number of label columns to prepare
    input_count: 1
    label_count: 52
    use_test_flags: true
    labels: ['standard_value_log','MinAbsPartialCharge','HeavyAtomMolWt','MaxAbsPartialCharge','MinAbsEStateIndex','Chi3n','HallKierAlpha','PEOE_VSA1','PEOE_VSA10','PEOE_VSA11','PEOE_VSA12','PEOE_VSA13','PEOE_VSA14','PEOE_VSA2','PEOE_VSA3','PEOE_VSA6','PEOE_VSA8','PEOE_VSA9','SMR_VSA1','SMR_VSA10','SMR_VSA3','SMR_VSA6','SMR_VSA9','SlogP_VSA10','SlogP_VSA3','SlogP_VSA4','SlogP_VSA6','TPSA','EState_VSA3','EState_VSA5','EState_VSA7','EState_VSA8','VSA_EState9','NHOHCount','NumAliphaticHeterocycles','NumAromaticHeterocycles','MolLogP','fr_Ar_COO','fr_C_O','fr_Imine','fr_NH1','fr_Ndealkylation2','fr_amide','fr_aryl_methyl','fr_ester','fr_ether','fr_furan','fr_imidazole','fr_methoxy','fr_piperzine','fr_pyridine','fr_sulfide','fr_thiazole','fr_urea']
    testing: 'is_testing'
  rnn:
    # RNN parameters
    seed: 12346
    epochs: 1
    batch: 160                 # metacentrum.cz: 128 - 160, optimum by grid: 96
    learning_rate: 0.003
    early_stop: 50             # number of tolerated epochs without improvement

    chained_models: false
    chained_labels: '[range(1, 4) * 8, range(4, 8) * 6, range(8, 14) * 4,range(14, 22) * 3, range(22, 46), [0] * 24]'
    chained_predict: '[0]'
    freeze_idxs: 'set([5])'
    trainable_inner: true

    # learning rate decay settings
    learning_rate_decay: true
    learning_rate_decay_type: 'step' # step,time,
    learning_rate_decay_step_config_steps: 20
    learning_rate_decay_step_config_ratio: 0.5

    # preprocessing switches
    label_idxs: 'range(46)'      # indexes of columns to use as label

    # statistics settings
    comment: 'test config files'
